<div class="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900">
  <div class="container mx-auto px-4 py-8">
    <!-- Header avec logo -->
    <div class="text-center mb-8">
      <div class="flex items-center justify-center mb-6">
        <div class="w-16 h-16 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center">
          <div class="w-8 h-8 text-purple-400">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M5 8h2v8H5zm7 0H9v8h3zm5 8h2V8h-2zM8 5h8v2H8z"/>
            </svg>
          </div>
        </div>
        <h1 class="text-4xl font-bold text-white ml-4">ğŸ† Mes RÃ©compenses</h1>
      </div>
      <p class="text-gray-300 text-lg">DÃ©bloquez des rÃ©compenses en combinant vos badges</p>
    </div>

    <!-- Navigation moderne -->
    <div class="flex justify-center mb-8">
      <div class="flex space-x-2">
        <%= link_to "Mes rÃ©compenses", my_rewards_path, 
            class: "px-4 py-2 rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors" %>
        <%= link_to "Toutes les rÃ©compenses", all_rewards_path, 
            class: "px-4 py-2 rounded-lg text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors" %>
      </div>
    </div>

    <div class="container mx-auto px-4 py-8">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-4">ğŸ Mes RÃ©compenses</h1>
    
    <!-- Progression vers la prochaine rÃ©compense -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h2 class="text-xl font-semibold mb-4">ğŸ“Š Progression</h2>
      <div class="flex items-center justify-between mb-4">
        <div class="text-sm text-gray-600">
          <span class="font-semibold"><%= @total_badges %></span> badges obtenus
        </div>
        <div class="text-sm text-gray-600">
          <% if @next_level && @next_level != 'completed' %>
            Prochaine rÃ©compense : <span class="font-semibold text-<%= @next_level == 'challenge' ? 'yellow' : @next_level == 'exclusif' ? 'gray' : @next_level == 'premium' ? 'orange' : 'pink' %>-600"><%= @next_level.humanize %></span>
          <% else %>
            <% 
              # VÃ©rifier si toutes les rÃ©compenses sont rÃ©ellement dÃ©bloquÃ©es
              challenge_unlocked = @challenge_rewards.any?
              exclusif_unlocked = @exclusif_rewards.any?
              premium_unlocked = @premium_rewards.any?
              ultime_unlocked = @ultime_rewards.any?
              
              all_unlocked = challenge_unlocked && exclusif_unlocked && premium_unlocked && ultime_unlocked
            %>
            <% if all_unlocked %>
              Toutes les rÃ©compenses dÃ©bloquÃ©es !
            <% else %>
              Continuez Ã  collecter des badges !
            <% end %>
          <% end %>
        </div>
      </div>
      
      <% if @next_level %>
        <div class="w-full bg-gray-200 rounded-full h-2.5">
          <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-2.5 rounded-full" style="width: <%= (@progress[0].to_f / @progress[1] * 100).round %>%"></div>
        </div>
        <div class="text-xs text-gray-500 mt-2">
          <%= @progress[0] %> / <%= @progress[1] %> badges
        </div>
      <% end %>
    </div>
  </div>

  <!-- RÃ©compenses par niveau -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    
    <!-- Challenge (3 badges) -->
    <div class="bg-black/80 backdrop-blur-sm rounded-xl shadow-lg p-6 border border-gray-700">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-white">ğŸ¥‰ Challenge</h3>
        <span class="text-gray-300 text-sm">3 badges</span>
      </div>
      
      <% if @challenge_rewards.any? %>
                 <% @challenge_rewards.each do |reward| %>
           <div class="bg-gray-800/50 rounded-lg p-4 mb-3 border border-gray-600">
             <div class="flex items-center mb-2">
               <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg flex items-center justify-center mr-3">
                 <span class="text-2xl">ğŸ</span>
               </div>
               <div>
                 <h4 class="font-semibold text-white">RÃ©compense Surprise</h4>
                 <p class="text-sm text-gray-300">Contenu exclusif dÃ©bloquÃ©</p>
               </div>
             </div>
             <div class="text-xs text-gray-400">
               DÃ©bloquÃ© le <%= reward.unlocked_at&.strftime("%d/%m/%Y") %>
             </div>
           </div>
         <% end %>
      <% else %>
        <div class="bg-gray-800/50 rounded-lg p-4 text-center border border-gray-600">
          <div class="text-4xl mb-2">ğŸ”’</div>
          <p class="text-gray-300 text-sm">DÃ©bloquÃ© avec 3 badges</p>
        </div>
      <% end %>
    </div>

    <!-- Exclusif (6 badges) -->
    <div class="bg-black/80 backdrop-blur-sm rounded-xl shadow-lg p-6 border border-gray-700">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-white">ğŸ¥ˆ Exclusif</h3>
        <span class="text-gray-300 text-sm">6 badges</span>
      </div>
      
      <% if @exclusif_rewards.any? %>
                 <% @exclusif_rewards.each do |reward| %>
           <div class="bg-gray-800/50 rounded-lg p-4 mb-3 border border-gray-600">
             <div class="flex items-center mb-2">
               <div class="w-12 h-12 bg-gradient-to-br from-gray-400 to-gray-600 rounded-lg flex items-center justify-center mr-3">
                 <span class="text-2xl">ğŸ</span>
               </div>
               <div>
                 <h4 class="font-semibold text-white">RÃ©compense Surprise</h4>
                 <p class="text-sm text-gray-300">Contenu exclusif dÃ©bloquÃ©</p>
               </div>
             </div>
             <div class="text-xs text-gray-400">
               DÃ©bloquÃ© le <%= reward.unlocked_at&.strftime("%d/%m/%Y") %>
             </div>
           </div>
         <% end %>
      <% else %>
        <div class="bg-gray-800/50 rounded-lg p-4 text-center border border-gray-600">
          <div class="text-4xl mb-2">ğŸ”’</div>
          <p class="text-gray-300 text-sm">DÃ©bloquÃ© avec 6 badges</p>
        </div>
      <% end %>
    </div>

    <!-- Premium (9 badges) -->
    <div class="bg-black/80 backdrop-blur-sm rounded-xl shadow-lg p-6 border border-gray-700">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-white">ğŸ¥‡ Premium</h3>
        <span class="text-gray-300 text-sm">9 badges</span>
      </div>
      
      <% if @premium_rewards.any? %>
                 <% @premium_rewards.each do |reward| %>
           <div class="bg-gray-800/50 rounded-lg p-4 mb-3 border border-gray-600">
             <div class="flex items-center mb-2">
               <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-lg flex items-center justify-center mr-3">
                 <span class="text-2xl">ğŸ</span>
               </div>
               <div>
                 <h4 class="font-semibold text-white">RÃ©compense Surprise</h4>
                 <p class="text-sm text-gray-300">Contenu exclusif dÃ©bloquÃ©</p>
               </div>
             </div>
             <div class="text-xs text-gray-400">
               DÃ©bloquÃ© le <%= reward.unlocked_at&.strftime("%d/%m/%Y") %>
             </div>
           </div>
         <% end %>
      <% else %>
        <div class="bg-gray-800/50 rounded-lg p-4 text-center border border-gray-600">
          <div class="text-4xl mb-2">ğŸ”’</div>
          <p class="text-gray-300 text-sm">DÃ©bloquÃ© avec 9 badges</p>
        </div>
      <% end %>
    </div>

    <!-- Ultime (Collection Arc-en-ciel) -->
    <div class="bg-black/80 backdrop-blur-sm rounded-xl shadow-lg p-6 border border-gray-700">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-white">ğŸŒˆ Ultime</h3>
        <span class="text-gray-300 text-sm">1 Bronze + 1 Silver + 1 Gold</span>
      </div>
      
      <% if @ultime_rewards.any? %>
                 <% @ultime_rewards.each do |reward| %>
           <div class="bg-gray-800/50 rounded-lg p-4 mb-3 border border-gray-600">
             <div class="flex items-center mb-2">
               <div class="w-12 h-12 bg-gradient-to-br from-pink-400 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                 <span class="text-2xl">ğŸ</span>
               </div>
               <div>
                 <h4 class="font-semibold text-white">RÃ©compense Surprise</h4>
                 <p class="text-sm text-gray-300">Contenu exclusif dÃ©bloquÃ©</p>
               </div>
             </div>
             <div class="text-xs text-gray-400">
               DÃ©bloquÃ© le <%= reward.unlocked_at&.strftime("%d/%m/%Y") %>
             </div>
           </div>
         <% end %>
      <% else %>
        <div class="bg-gray-800/50 rounded-lg p-4 text-center border border-gray-600">
          <div class="text-4xl mb-2">ğŸ”’</div>
          <p class="text-gray-300 text-sm">Collection Arc-en-ciel</p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Statistiques des badges -->
  <div class="mt-8 bg-black/80 backdrop-blur-sm rounded-xl shadow-lg p-6 border border-gray-700">
    <h2 class="text-xl font-semibold mb-4 text-white">ğŸ“Š Statistiques des Badges</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="text-center">
        <div class="text-2xl font-bold text-yellow-400"><%= @bronze_count %></div>
        <div class="text-sm text-gray-300">Bronze</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-gray-400"><%= @silver_count %></div>
        <div class="text-sm text-gray-300">Silver</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-yellow-300"><%= @gold_count %></div>
        <div class="text-sm text-gray-300">Gold</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-purple-400"><%= @total_badges %></div>
        <div class="text-sm text-gray-300">Total</div>
      </div>
    </div>
  </div>

  <!-- Bouton pour vÃ©rifier les nouvelles rÃ©compenses -->
  <div class="mt-6 text-center">
    <%= link_to "ğŸ”„ VÃ©rifier les Nouvelles RÃ©compenses", unlock_rewards_path, method: :post, class: "bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition duration-200" %>
  </div>
</div>

<script>
// Animation pour les nouvelles rÃ©compenses
document.addEventListener('DOMContentLoaded', function() {
  const rewards = document.querySelectorAll('.bg-white.rounded-lg');
  
  rewards.forEach((reward, index) => {
    reward.style.animation = `fadeInUp 0.6s ease-out ${index * 0.1}s both`;
  });
});

// CSS pour l'animation
const style = document.createElement('style');
style.textContent = `
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
`;
document.head.appendChild(style);
</script> 