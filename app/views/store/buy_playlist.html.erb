<div class="min-h-screen bg-gray-900 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Bouton retour -->
    <div class="mb-8">
      <%= link_to store_path, class: "inline-flex items-center text-purple-400 hover:text-purple-300 transition-colors" do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Retour Ã  la boutique
      <% end %>
    </div>

    <!-- En-tÃªte -->
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold text-white mb-4">ğŸµ Acheter une playlist</h1>
      <p class="text-xl text-gray-300">DÃ©bloquez cette playlist premium et commencez Ã  jouer</p>
    </div>

    <!-- Affichage du solde de points -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full">
        <span class="text-2xl mr-2">ğŸ’°</span>
        <span class="text-white font-semibold text-lg">Votre solde : <%= @user_points %> points</span>
      </div>
    </div>

    <!-- DÃ©tail de la playlist -->
    <div class="rounded-xl p-8 border border-gray-700 mb-8 overflow-hidden relative"
         style="background-image: url('/assets/store/lovepik.png'); background-size: cover; background-position: center;">
      <!-- Overlay gradient -->
      <div class="absolute inset-0 bg-gradient-to-br from-purple-600/40 to-blue-600/40 rounded-xl"></div>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 relative z-10">
        <!-- Visuel de la playlist -->
        <div class="text-center">
          <div class="w-full h-64 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center mb-4 relative overflow-hidden"
               style="background-image: url('/assets/store/lovepik.png'); background-size: cover; background-position: center;">
            <!-- Overlay gradient pour le visuel -->
            <div class="absolute inset-0 bg-gradient-to-br from-purple-600/30 to-blue-600/30 rounded-lg"></div>
            <span class="text-8xl relative z-10">ğŸµ</span>
          </div>
          <h3 class="text-2xl font-bold text-white mb-2"><%= @playlist.title %></h3>
          <div class="flex items-center justify-center text-green-400 font-semibold text-lg">
            <span class="text-2xl mr-2">ğŸ’°</span>
            <span><%= @playlist.points_required %> points</span>
          </div>
        </div>

        <!-- Informations de la playlist -->
        <div>
          <h4 class="text-xl font-semibold text-white mb-4">Description</h4>
          <p class="text-gray-300 mb-6 leading-relaxed"><%= @playlist.description %></p>
          
          <div class="space-y-3">
            <div class="flex items-center text-gray-300">
              <span class="text-purple-400 mr-3">ğŸ¯</span>
              <span>Playlist premium exclusive</span>
            </div>
            <div class="flex items-center text-gray-300">
              <span class="text-purple-400 mr-3">ğŸ®</span>
              <span>AccÃ¨s illimitÃ© aux jeux</span>
            </div>
            <div class="flex items-center text-gray-300">
              <span class="text-purple-400 mr-3">ğŸ†</span>
              <span>DÃ©bloque des badges spÃ©ciaux</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Section d'achat -->
    <div class="bg-gray-800 rounded-xl p-8 border border-gray-700 overflow-hidden relative">
      <!-- Fond gradient subtil -->
      <div class="absolute inset-0 bg-gradient-to-br from-gray-700/20 to-gray-800/20 rounded-xl"></div>
      
      <div class="text-center relative z-10">
        <% if @can_afford %>
          <!-- Message de confirmation -->
          <div class="mb-6 p-4 bg-green-900 border border-green-600 rounded-lg">
            <div class="flex items-center justify-center text-green-400">
              <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              <span class="font-semibold">Vous avez suffisamment de points pour acheter cette playlist !</span>
            </div>
          </div>

          <!-- Bouton d'achat -->
          <%= button_to confirm_playlist_purchase_store_path(@playlist), 
                      method: :post, 
                      class: "w-full max-w-md mx-auto bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 relative z-20" do %>
            <span class="flex items-center justify-center text-lg">
              <span class="mr-3">ğŸ›’</span>
              Acheter cette playlist
            </span>
          <% end %>

          <!-- RÃ©sumÃ© de l'achat -->
          <div class="mt-4 text-gray-400">
            <p>CoÃ»t : <span class="text-green-400 font-semibold"><%= @playlist.points_required %> points</span></p>
            <p>Solde aprÃ¨s achat : <span class="text-green-400 font-semibold"><%= @user_points - @playlist.points_required %> points</span></p>
          </div>
        <% else %>
          <!-- Message d'insuffisance de points -->
          <div class="mb-6 p-4 bg-red-900 border border-red-600 rounded-lg">
            <div class="flex items-center justify-center text-red-400">
              <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
              </svg>
              <span class="font-semibold">Points insuffisants pour acheter cette playlist</span>
            </div>
          </div>

          <!-- Bouton d'achat dÃ©sactivÃ© -->
          <button disabled class="w-full max-w-md mx-auto bg-gray-600 text-gray-400 font-bold py-4 px-8 rounded-lg cursor-not-allowed">
            <span class="flex items-center justify-center text-lg">
              <span class="mr-3">ğŸ”’</span>
              Points insuffisants
            </span>
          </button>

          <!-- Bouton pour acheter des points -->
          <div class="mt-6">
            <%= link_to store_path, class: "inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 relative z-20" do %>
              <span class="mr-2">ğŸ’°</span>
              Acheter des points
            </span>
            <% end %>
          </div>

          <!-- Calcul des points manquants -->
          <div class="mt-4 text-gray-400">
            <p>Points nÃ©cessaires : <span class="text-red-400 font-semibold"><%= @playlist.points_required %> points</span></p>
            <p>Points manquants : <span class="text-red-400 font-semibold"><%= @playlist.points_required - @user_points %> points</span></p>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<style>
  /* Animations et effets visuels amÃ©liorÃ©s */
  .transform {
    transition: all 0.3s ease;
  }
  
  .hover\:scale-105:hover {
    transform: scale(1.05);
  }
  
  /* Effet de brillance sur les boutons */
  .bg-gradient-to-r {
    position: relative;
    overflow: hidden;
  }
  
  .bg-gradient-to-r::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s;
  }
  
  .bg-gradient-to-r:hover::before {
    left: 100%;
  }
  
  /* Effet de brillance sur les cartes avec images */
  .overflow-hidden {
    position: relative;
  }
  
  .overflow-hidden::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s;
    pointer-events: none;
    z-index: 5;
  }
  
  .overflow-hidden:hover::after {
    left: 100%;
  }
  
  /* AmÃ©lioration de l'opacitÃ© des images de fond */
  .opacity-10 {
    opacity: 0.1;
  }
  
  .opacity-20 {
    opacity: 0.2;
  }
  
  /* Effet de rotation subtile sur les images de fond au hover */
  .overflow-hidden:hover .bg-cover {
    transform: scale(1.1) rotate(1deg);
    transition: transform 0.3s ease;
  }
  
  /* AmÃ©lioration des transitions */
  .transition-all {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Effet de profondeur sur les cartes */
  .bg-gray-800 {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  .bg-gray-800:hover {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  /* Animation de pulsation pour les messages de confirmation */
  .bg-green-900 {
    animation: pulse-success 2s ease-in-out infinite alternate;
  }
  
  @keyframes pulse-success {
    from {
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.3);
    }
    to {
      box-shadow: 0 0 20px rgba(34, 197, 94, 0.6);
    }
  }
  
  /* Animation de pulsation pour les messages d'erreur */
  .bg-red-900 {
    animation: pulse-error 2s ease-in-out infinite alternate;
  }
  
  @keyframes pulse-error {
    from {
      box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
    }
    to {
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
    }
  }
</style> 