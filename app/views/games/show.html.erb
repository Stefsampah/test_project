<div class="min-h-screen bg-gray-900 py-4 sm:py-8">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- En-tête avec logo -->
    <div class="text-center mb-8">
      <div class="flex items-center justify-center mb-6">
        <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center">
          <div class="w-8 h-8 text-cyan-400">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8 5.14v14l11-7-11-7z"/>
            </svg>
          </div>
        </div>
        <h1 class="text-4xl font-bold text-white ml-4">
          <%= @playlist.title %>
        </h1>
      </div>
    </div>

    <div class="shorts-container">
      <% if @game.current_video %>
        <div class="shorts-player">
          <!-- Vidéo -->
          <div class="shorts-video">
            <iframe 
              src="https://www.youtube.com/embed/<%= @game.current_video.youtube_id %>?autoplay=1&controls=0&modestbranding=1&rel=0"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
            </iframe>
          </div>

          <!-- Contrôles et informations -->
          <div class="shorts-controls">
            <div class="shorts-info">
              <h2><%= @game.current_video.title %></h2>
              <p><%= @playlist.title %></p>
            </div>
            
            <div class="shorts-actions">
              <%= button_to swipe_playlist_game_path(@playlist, @game, direction: "dislike"), 
                  method: :post, 
                  class: "action-btn dislike" do %>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" class="action-icon">
                  <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              <% end %>
              
              <%= button_to swipe_playlist_game_path(@playlist, @game, direction: "like"), 
                  method: :post, 
                  class: "action-btn like" do %>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="action-icon">
                  <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
              <% end %>
            </div>
          </div>
        </div>
      <% else %>
        <div class="shorts-end">
          <div class="end-message">
            <h2>Playlist terminée !</h2>
            <%= link_to "Retour aux playlists", playlists_path, class: "end-button" %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Lien retour -->
    <div class="text-center mt-6">
      <%= link_to playlists_path, 
          class: "inline-flex items-center text-white/80 hover:text-white transition-colors" do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Retour aux playlists
      <% end %>
    </div>
  </div>
</div>

<style>
/* Reset et base */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #000 !important;
  color: white;
  height: 100vh;
  overflow: hidden;
}

/* Container principal */
.shorts-container {
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #000;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9999;
}

/* Player vidéo */
.shorts-player {
  width: 360px;  /* Format 9:16 pour mobile */
  height: 640px;
  position: relative;
  overflow: hidden;
  border-radius: 16px;
  background: #000;
  box-shadow: 0 0 25px rgba(0,0,0,0.5);
}

/* Conteneur vidéo */
.shorts-video {
  width: 100%;
  height: 100%;
  position: relative;
}

.shorts-video iframe {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  object-fit: cover;
}

/* Contrôles et overlay */
.shorts-controls {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 20px;
  background: linear-gradient(transparent, rgba(0,0,0,0.8));
  z-index: 10;
}

/* Informations vidéo */
.shorts-info {
  margin-bottom: 20px;
}

.shorts-info h2 {
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 4px;
  color: #fff;
}

.shorts-info p {
  font-size: 0.9rem;
  color: rgba(255,255,255,0.8);
}

/* Boutons d'action */
.shorts-actions {
  display: flex;
  justify-content: center;
  gap: 24px;
  padding: 16px 0;
}

.action-icon {
  width: 32px;
  height: 32px;
  color: white;
}

.action-btn.dislike .action-icon {
  stroke: white;
  stroke-width: 2.5;
}

.action-btn.like .action-icon {
  fill: white;
}

.action-btn {
  width: 64px !important;
  height: 64px !important;
  border-radius: 50% !important;
  border: none !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  color: white !important;
  border: 2px solid rgba(255,255,255,0.2) !important;
  padding: 0 !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
}

.action-btn.dislike {
  background: linear-gradient(45deg, #ff4444, #ff0000) !important;
}

.action-btn.like {
  background: linear-gradient(45deg, #2196F3, #4FC3F7) !important;
}

.action-btn:hover {
  transform: scale(1.15);
  box-shadow: 0 6px 16px rgba(0,0,0,0.3);
}

.action-btn:active {
  transform: scale(0.95);
}

/* Message de fin */
.shorts-end {
  width: 360px;
  height: 640px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #111;
  border-radius: 16px;
}

.end-message {
  text-align: center;
  padding: 20px;
}

.end-message h2 {
  margin-bottom: 20px;
  color: white;
}

.end-button {
  display: inline-block;
  padding: 12px 24px;
  background: linear-gradient(45deg, #ff4b8a, #ff6b6b);
  color: white;
  text-decoration: none;
  border-radius: 25px;
  font-weight: 600;
  transition: all 0.3s ease;
}

.end-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(255,75,138,0.3);
}

/* Responsive */
@media (max-width: 400px) {
  .shorts-player,
  .shorts-end {
    width: 100vw;
    height: 100vh;
    border-radius: 0;
  }
}
</style> 