<div class="min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md mx-auto">
    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
      <div class="bg-blue-600 px-6 py-4">
        <h2 class="text-xl font-bold text-white">Modifier mon profil</h2>
      </div>

      <div class="p-6">
        <%= form_with(model: @user, url: profile_path, method: :patch, class: "space-y-6") do |f| %>
          <% if @user.errors.any? %>
            <div class="bg-red-50 p-4 rounded-md">
              <div class="text-sm text-red-700">
                <h3 class="font-medium">Des erreurs ont empêché la sauvegarde :</h3>
                <ul class="list-disc pl-5 mt-2">
                  <% @user.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
            </div>
          <% end %>

          <!-- Current Avatar Preview -->
          <div class="flex flex-col items-center space-y-4">
            <div class="w-32 h-32 rounded-full bg-gray-200 overflow-hidden">
              <% if @user.avatar.attached? %>
                <%= image_tag @user.avatar, class: "w-full h-full object-cover" %>
              <% else %>
                <svg class="w-full h-full text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
              <% end %>
            </div>

            <div class="text-sm text-gray-600">
              <% if @user.avatar.attached? %>
                Avatar actuel
              <% else %>
                Pas d'avatar
              <% end %>
            </div>
          </div>

          <!-- Avatar Upload -->
          <div>
            <%= f.label :avatar, "Choisir un nouvel avatar", class: "block text-sm font-medium text-gray-700" %>
            <div class="mt-1">
              <%= f.file_field :avatar, 
                  accept: 'image/*',
                  class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
            </div>
            <p class="mt-2 text-sm text-gray-500">
              PNG, JPG, GIF jusqu'à 5MB
            </p>
          </div>

          <!-- Submit Button -->
          <div class="flex justify-end">
            <%= f.submit "Mettre à jour", 
                class: "px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div> 