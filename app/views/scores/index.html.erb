<% require 'ostruct' %>
<!-- Page Scores Compl√®te et Responsive -->
<div class="min-h-screen bg-gray-900 py-0">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <!-- En-t√™te harmonis√© -->
    <div class="text-center mb-4">
      <h1 class="text-2xl font-bold text-white">Classements</h1>
    </div>
    
    <!-- Filtres centr√©s -->
    <div class="flex justify-center mb-8">
      <div class="flex space-x-2">
        <button class="score-filter active px-4 py-2 rounded-lg text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 transition-colors" data-target="all">Tous les scores</button>
        <button class="score-filter px-4 py-2 rounded-lg text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors" data-target="my">Mes scores</button>
      </div>
    </div>

    <!-- Section Top 3 Players - Design √©pur√© -->
    <div id="total-section" class="score-section mb-8">
      <div class="bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-6 sm:p-8 shadow-xl">
        <h2 class="text-xl font-semibold text-white mb-6 flex items-center">
          <svg class="w-5 h-5 mr-2 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
          </svg>
          Top Players
        </h2>
        
        <!-- Top 3 avec design responsive -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6">
          <% if @total_scores.present? %>
            <% @total_scores.first(3).each_with_index do |score, index| %>
              <% user = User.find(score[:user_id]) rescue nil %>
              <% next unless user %>
              <% points = score[:points].to_i %>
              <% rank_class = case index
                   when 0 then "border-yellow-400 bg-gradient-to-br from-yellow-500/20 to-yellow-600/20"
                   when 1 then "border-gray-300 bg-gradient-to-br from-gray-500/20 to-gray-600/20"
                   when 2 then "border-orange-500 bg-gradient-to-br from-orange-500/20 to-orange-600/20"
                   else "border-gray-600 bg-gray-800"
                   end %>
              <% rank_icon = case index
                   when 0 then "ü•á"
                   when 1 then "ü•à"
                   when 2 then "ü•â"
                   else "üèÜ"
                   end %>
              
              <div class="relative group">
                <div class="<%= rank_class %> border-2 rounded-xl p-4 sm:p-6 text-center transform transition-all duration-300 hover:scale-105 hover:shadow-2xl">
                  <!-- Rank Badge -->
                  <div class="absolute -top-3 -right-3 w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm">
                    <%= index + 1 %>
                  </div>
                  
                  <!-- Avatar -->
                  <div class="mb-4">
                    <% if user.avatar.attached? %>
                      <%= image_tag user.avatar, class: "h-16 w-16 rounded-full border-2 border-white shadow-lg mx-auto object-cover" %>
                    <% else %>
                      <img src="/players/<%= user.id %>.jpg"
                           class="h-16 w-16 rounded-full border-2 border-white shadow-lg mx-auto object-cover"
                           onerror="this.style.display='none';this.nextElementSibling.style.display='flex';">
                      <div class="h-16 w-16 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold mx-auto" style="display:none;">
                        <%= user.email.first.upcase %>
                      </div>
                    <% end %>
                  </div>
                  
                  <!-- Username -->
                  <h3 class="text-lg font-semibold text-white mb-2"><%= user.email.split('@').first %></h3>
                  
                  <!-- Points -->
                  <div class="text-3xl font-bold text-yellow-400 mb-2"><%= points %></div>
                  
                  <!-- Rank Icon -->
                  <div class="text-2xl mb-2"><%= rank_icon %></div>
                  
                  <!-- Badge si pr√©sent -->
                  <% if score[:badges].any? %>
                    <div class="space-y-1">
                      <% score[:badges].each do |badge| %>
                        <div class="inline-block px-3 py-1 rounded-full text-xs font-medium text-white bg-gradient-to-r from-blue-500 to-purple-600">
                          <%= badge %>
                        </div>
                      <% end %>
                    </div>
                  <% end %>
                </div>
              </div>
            <% end %>
          <% else %>
            <div class="col-span-full text-center text-gray-400 py-8">
              <p>Aucun score disponible pour le moment.</p>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Section Classement Complet - Responsive -->
    <div id="complete-ranking-section" class="score-section mb-8">
      <div class="bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-6 sm:p-8 shadow-xl">
        <h2 class="text-xl font-semibold text-white mb-6 flex items-center">
          <svg class="w-5 h-5 mr-2 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
          </svg>
          Classement Complet
        </h2>
        
        <!-- Liste de tous les joueurs - Design √©quilibr√© -->
        <div class="space-y-3">
          <% if @total_scores.present? %>
            <% @total_scores.each_with_index do |score, index| %>
              <% user = User.find(score[:user_id]) rescue nil %>
              <% next unless user %>
              <% points = score[:points].to_i %>
              <% is_current_user = user_signed_in? && user.id == current_user.id %>
              <% row_class = is_current_user ? "bg-gradient-to-r from-blue-600/20 to-purple-600/20 border-blue-500" : "bg-gray-800/50 border-gray-700" %>
              
              <div class="<%= row_class %> border rounded-lg p-4 hover:bg-gray-700/50 transition-colors">
                <div class="flex items-center justify-between">
                  <!-- C√¥t√© gauche : Rank + Avatar + Infos -->
                  <div class="flex items-center space-x-3 min-w-0 flex-1">
                    <!-- Rank -->
                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0">
                      <%= index + 1 %>
                    </div>
                    
                    <!-- Avatar compact -->
                    <div class="w-8 h-8 rounded-full overflow-hidden flex-shrink-0">
                      <% if user.avatar.attached? %>
                        <%= image_tag user.avatar, class: "w-full h-full object-cover" %>
                      <% else %>
                        <img src="/players/<%= user.id %>.jpg"
                             class="w-full h-full object-cover"
                             onerror="this.style.display='none';this.nextElementSibling.style.display='flex';">
                        <div class="w-full h-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-bold" style="display:none;">
                          <%= user.email.first.upcase %>
                        </div>
                      <% end %>
                    </div>
                    
                    <!-- Infos utilisateur -->
                    <div class="min-w-0 flex-1">
                      <div class="text-white font-medium truncate">
                        <%= user.email.split('@').first %>
                        <% if is_current_user %>
                          <span class="ml-2 text-blue-400 text-xs">(Vous)</span>
                        <% end %>
                      </div>
                      <% if score[:badges].any? %>
                        <div class="text-xs text-blue-400 truncate"><%= score[:badges].first %></div>
                      <% end %>
                    </div>
                  </div>
                  
                  <!-- C√¥t√© droit : Points -->
                  <div class="text-right flex-shrink-0 ml-3">
                    <div class="text-xl font-bold text-yellow-400"><%= points %></div>
                    <div class="text-xs text-gray-400">points</div>
                  </div>
                </div>
              </div>
            <% end %>
          <% else %>
            <div class="text-center text-gray-400 py-8">
              <p>Aucun score disponible pour le moment.</p>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Section Cat√©gories Sp√©ciales - Restaur√©e et Responsive -->
    <div id="categories-section" class="score-section mb-8">
      <div class="bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-6 sm:p-8 shadow-xl">
        <h2 class="text-xl font-semibold text-white mb-6 flex items-center">
          <svg class="w-5 h-5 mr-2 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
          </svg>
          Cat√©gories Sp√©ciales
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Meilleurs Engagements -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
              <span class="mr-2">‚è±Ô∏è</span>
              Meilleurs Engagements
            </h3>
            <div class="space-y-3">
              <% if @top_engager_scores.present? %>
                <% @top_engager_scores.first(5).each_with_index do |score, index| %>
                  <% user = User.find(score[:user_id]) rescue nil %>
                  <% next unless user %>
                  <div class="flex items-center justify-between p-3 bg-gray-700 rounded-lg">
                    <div class="flex items-center space-x-3">
                      <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold">
                        <%= index + 1 %>
                      </div>
                      <span class="text-white text-sm"><%= user.email.split('@').first %></span>
                    </div>
                    <span class="text-yellow-400 font-bold"><%= score[:points] %></span>
                  </div>
                <% end %>
              <% else %>
                <p class="text-gray-400 text-sm">Aucun engagement disponible</p>
              <% end %>
            </div>
          </div>

          <!-- Meilleurs R√©gularit√©s -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
              <span class="mr-2">üéÆ</span>
              Meilleurs Comp√©titeurs
            </h3>
            <div class="space-y-3">
              <% if @best_ratio_scores.present? %>
                <% @best_ratio_scores.first(5).each_with_index do |score, index| %>
                  <% user = User.find(score[:user_id]) rescue nil %>
                  <% next unless user %>
                  <div class="flex items-center justify-between p-3 bg-gray-700 rounded-lg">
                    <div class="flex items-center space-x-3">
                      <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold">
                        <%= index + 1 %>
                      </div>
                      <span class="text-white text-sm"><%= user.email.split('@').first %></span>
                    </div>
                    <span class="text-yellow-400 font-bold"><%= score[:points] %></span>
                  </div>
                <% end %>
              <% else %>
                <p class="text-gray-400 text-sm">Aucune r√©gularit√© disponible</p>
              <% end %>
            </div>
          </div>

          <!-- Meilleurs Critiques -->
          <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
              <span class="mr-2">üß†</span>
              Meilleurs Critiques
            </h3>
            <div class="space-y-3">
              <% if @wise_critic_scores.present? %>
                <% @wise_critic_scores.first(5).each_with_index do |score, index| %>
                  <% user = User.find(score[:user_id]) rescue nil %>
                  <% next unless user %>
                  <div class="flex items-center justify-between p-3 bg-gray-700 rounded-lg">
                    <div class="flex items-center space-x-3">
                      <div class="w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold">
                        <%= index + 1 %>
                      </div>
                      <span class="text-white text-sm"><%= user.email.split('@').first %></span>
                    </div>
                    <span class="text-yellow-400 font-bold"><%= score[:points] %></span>
                  </div>
                <% end %>
              <% else %>
                <p class="text-gray-400 text-sm">Aucune critique disponible</p>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Section Scores par Playlist - Restaur√©e et Responsive -->
    <div id="playlists-section" class="score-section mb-8">
      <div class="bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-6 sm:p-8 shadow-xl">
        <h2 class="text-xl font-semibold text-white mb-6 flex items-center">
          <svg class="w-5 h-5 mr-2 text-cyan-400" fill="currentColor" viewBox="0 0 20 20">
            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
          </svg>
          Scores par Playlist
        </h2>
        
        <% if @scores_by_playlist.present? %>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <% @scores_by_playlist.each do |playlist, scores| %>
              <div class="bg-gray-800 rounded-lg p-6 hover:bg-gray-700 transition-colors">
                <div class="flex items-center justify-between mb-4">
                  <div class="flex-1 min-w-0">
                    <h3 class="text-lg font-semibold text-white truncate"><%= playlist.title %></h3>
                    <p class="text-gray-400 text-sm"><%= playlist.genre %></p>
                  </div>
                  <div class="text-right flex-shrink-0">
                    <div class="text-2xl font-bold text-cyan-400"><%= scores.map(&:user).uniq.count %></div>
                    <div class="text-xs text-gray-400">joueurs</div>
                  </div>
                </div>
                
                <!-- Top 3 de cette playlist (meilleur score par utilisateur) -->
                <div class="space-y-2">
                  <% top_scores_by_user = scores.group_by(&:user_id).map { |user_id, user_scores| user_scores.max_by(&:points) }.sort_by { |s| -s.points } %>
                  <% top_scores_by_user.first(3).each_with_index do |score, index| %>
                    <% user = score.user %>
                    <div class="flex items-center justify-between p-2 bg-gray-700 rounded">
                      <div class="flex items-center space-x-2">
                        <div class="w-5 h-5 bg-cyan-500 rounded-full flex items-center justify-center text-white text-xs font-bold">
                          <%= index + 1 %>
                        </div>
                        <div class="w-6 h-6 rounded-full overflow-hidden flex items-center justify-center bg-gray-600 text-white text-xs font-bold">
                          <% if user.avatar.attached? %>
                            <%= image_tag user.avatar, class: "w-6 h-6 object-cover" %>
                          <% else %>
                            <span><%= user.email.first.upcase %></span>
                          <% end %>
                        </div>
                        <span class="text-white text-sm truncate"><%= user.email.split('@').first %></span>
                      </div>
                      <span class="text-yellow-400 font-bold text-sm"><%= score.points %></span>
                    </div>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>
        <% else %>
          <div class="text-center text-gray-400 py-8">
            <p>Aucun score par playlist disponible.</p>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Section Mes Scores - Design √©pur√© et Responsive -->
    <div id="my-scores-section" class="score-section" style="display: none;">
      <!-- Avatar du joueur -->
      <div class="flex justify-center mb-6">
        <div class="relative">
          <% if current_user.avatar.attached? %>
            <%= image_tag current_user.avatar, class: "w-24 h-24 sm:w-28 sm:h-28 rounded-full border-4 border-purple-500 object-cover shadow-xl" %>
          <% else %>
            <div class="w-24 h-24 sm:w-28 sm:h-28 rounded-full border-4 border-purple-500 bg-gradient-to-r from-purple-600 to-purple-700 flex items-center justify-center shadow-xl">
              <span class="text-white text-3xl sm:text-4xl font-bold"><%= current_user.username&.first&.upcase || current_user.email.first.upcase %></span>
            </div>
          <% end %>
        </div>
      </div>
      
      <div class="bg-gradient-to-r from-purple-800 to-purple-900 rounded-xl p-6 sm:p-8 shadow-xl">
        <h2 class="text-xl font-semibold text-white mb-6 flex items-center">
          <svg class="w-5 h-5 mr-2 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          Mes Scores
        </h2>
        
        <!-- D√©tail du score global -->
        <div class="bg-gray-800 rounded-lg p-6 mb-8">
          <h3 class="text-lg font-bold text-white mb-4 text-center">D√©tail du Score Global</h3>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <div class="text-center">
              <div class="text-2xl font-bold text-purple-400"><%= current_user.regularity_points %></div>
              <div class="text-sm text-gray-300">R√©gularit√©</div>
              <div class="text-xs text-gray-400">(<%= current_user.playlists_per_day %> playlists/jour √ó 20)</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-green-400"><%= current_user.listening_points %></div>
              <div class="text-sm text-gray-300">Temps d'√©coute</div>
              <div class="text-xs text-gray-400">(<%= current_user.swipes.count %> swipes √ó 1.5)</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-purple-400"><%= current_user.critical_opinions_points %></div>
              <div class="text-sm text-gray-300">Critique constructive</div>
              <div class="text-xs text-gray-400">(<%= current_user.likes_count + current_user.dislikes_count %> actions + bonus)</div>
            </div>
          </div>
        </div>

        <% if @my_scores.present? %>
          <!-- R√©sum√© des scores -->
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-8">
            <div class="bg-gray-800 rounded-lg p-4 text-center">
              <div class="text-3xl font-bold text-purple-400 mb-2"><%= @my_scores.count %></div>
              <div class="text-gray-300 text-sm">Playlists jou√©es</div>
            </div>
            <div class="bg-gray-800 rounded-lg p-4 text-center">
              <div class="text-3xl font-bold text-green-400 mb-2"><%= current_user.game_points %></div>
              <div class="text-gray-300 text-sm">Points totaux</div>
            </div>
            <div class="bg-gray-800 rounded-lg p-4 text-center">
              <div class="text-3xl font-bold text-yellow-400 mb-2"><%= @my_scores.maximum(:points) || 0 %></div>
              <div class="text-gray-300 text-sm">Meilleur score</div>
            </div>
          </div>

          <!-- Scores par playlist -->
          <div class="space-y-4">
            <% @my_scores_by_playlist.each do |playlist, scores| %>
              <div class="bg-gray-800 rounded-lg p-6 hover:bg-gray-700 transition-colors">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4">
                  <div class="flex-1 min-w-0 mb-4 sm:mb-0">
                    <h3 class="text-lg font-semibold text-white"><%= playlist.title %></h3>
                    <p class="text-gray-400 text-sm"><%= playlist.genre %></p>
                  </div>
                  <div class="text-right">
                    <div class="text-2xl font-bold text-purple-400"><%= scores.first.points %></div>
                    <div class="text-xs text-gray-400">points</div>
                  </div>
                </div>
                
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between text-sm text-gray-300">
                  <span>Jou√© le <%= scores.first.updated_at.strftime("%d/%m/%Y") %></span>
                  <span><%= pluralize(playlist.videos.count, 'titre') %></span>
                </div>
              </div>
            <% end %>
          </div>
        <% else %>
          <div class="text-center text-gray-400 py-8">
            <p>Vous n'avez pas encore de scores. Commencez √† jouer pour voir vos r√©sultats ici !</p>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Boutons d'action - Design coh√©rent avec l'application -->
    <div class="flex flex-col sm:flex-row justify-center items-center gap-4 mt-8">
      <button onclick="window.location.href='<%= playlists_path %>'" 
          class="inline-flex items-center px-8 py-4 text-lg font-medium rounded-full text-white bg-blue-600 hover:bg-blue-700 transition-all focus:outline-none transform hover:scale-105">
        <span>üéµ Jouer</span>
      </button>
      
      <button onclick="window.location.href='<%= my_badges_path %>'" 
          class="inline-flex items-center px-8 py-4 text-lg font-medium rounded-full text-white bg-yellow-600 hover:bg-yellow-700 transition-all focus:outline-none transform hover:scale-105">
        <span>üèÖ Mes Badges</span>
      </button>
      
      <button onclick="window.location.href='<%= profile_path %>'" 
          class="inline-flex items-center px-8 py-4 text-lg font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 transition-all focus:outline-none transform hover:scale-105">
        <span>üë§ Mon Profil</span>
      </button>
    </div>
<style>
  /* Harmonisation des titres principaux */
  h1.text-2xl.font-bold.text-white {
    font-size: 1.5rem !important;
    font-weight: 700 !important;
    line-height: 1.2 !important;
  }
</style>

<style>
  .score-filter.active {
    background-color: #9333ea;
  }
  
  .score-section {
    transition: all 0.3s ease;
  }
  
  /* Responsive improvements */
  @media (max-width: 640px) {
    .score-section {
      margin-bottom: 1.5rem;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const scoreFilters = document.querySelectorAll('.score-filter');
    const scoreSections = document.querySelectorAll('.score-section');
    const totalSection = document.getElementById('total-section');
    const completeRankingSection = document.getElementById('complete-ranking-section');
    const categoriesSection = document.getElementById('categories-section');
    const playlistsSection = document.getElementById('playlists-section');
    const myScoresSection = document.getElementById('my-scores-section');
    
    // Initialisation - montrer toutes les sections sauf "Mes scores"
    function showAllSections() {
      scoreSections.forEach(section => {
        if (section.id === 'my-scores-section') {
          section.style.display = 'none';
        } else {
          section.style.display = 'block';
        }
      });
    }
    
    // Par d√©faut, montrer toutes les sections sauf "Mes scores"
    showAllSections();
    
    // Gestion des filtres
    scoreFilters.forEach(filter => {
      filter.addEventListener('click', function() {
        // Mettre √† jour l'√©tat actif
        scoreFilters.forEach(f => f.classList.remove('active'));
        this.classList.add('active');
        
        const target = this.getAttribute('data-target');
        
        // Afficher les sections appropri√©es
        if (target === 'all') {
          // Afficher toutes les sections sauf "Mes scores"
          showAllSections();
        } else if (target === 'my') {
          // Afficher seulement "Mes scores"
          scoreSections.forEach(section => {
            if (section.id === 'my-scores-section') {
              section.style.display = 'block';
            } else {
              section.style.display = 'none';
            }
          });
        }
        
        // Scroll en douceur vers le haut de la section
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    });
  });
</script>
