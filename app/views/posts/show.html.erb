<% content_for :seo_title, (@post.meta_title.presence || @post.title) %>
<% content_for :seo_description, (@post.meta_description.presence || @post.excerpt) %>

<section class="max-w-3xl mx-auto px-4 py-12">
  <header class="mb-8">
    <% if @post.slug == "selection-du-mois-rap-ivoire-power" %>
      <% rap_playlist = Playlist.find_by(title: "Rap Ivoire Power") %>
    <% end %>
    <% if @post.slug == "selection-du-mois-rap-ivoire-power" %>
      <div class="mb-6 overflow-hidden rounded-xl border border-gray-700 bg-black">
        <%= image_tag "blog/decouvertedumois.png",
          alt: @post.title,
          class: "w-full h-full object-cover" %>
      </div>
    <% end %>
    <% if @post.category.present? %>
      <div class="text-xs uppercase tracking-wide text-purple-300 mb-2"><%= @post.category %></div>
    <% end %>
    <div class="flex flex-wrap items-center gap-4 mb-3">
      <h1 class="text-3xl md:text-4xl font-bold text-white"><%= @post.title %></h1>
      <% if rap_playlist.present? %>
        <%= link_to "DÃ©couvrir sur Tube'NPlay", playlist_path(rap_playlist, locale: I18n.locale), class: "bg-purple-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-500 transition-colors" %>
      <% end %>
    </div>
    <% if @post.published_at.present? %>
      <p class="text-sm text-gray-400"><%= l(@post.published_at.to_date, format: :long) %></p>
    <% end %>
  </header>

  <article class="prose prose-invert max-w-none text-gray-200">
    <%= sanitize(
      @post.content,
      tags: %w[p br strong em ul ol li table thead tbody tr th td h2 h3 h4 div span button],
      attributes: %w[class]
    ) %>
  </article>

  <div class="mt-10 flex flex-wrap gap-4">
    <%= link_to t('blog.back_to_blog'), blog_path, class: "bg-gray-800 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors" %>
    <%= link_to t('blog.cta_playlists'), playlists_path, class: "bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-500 transition-colors" %>
  </div>
</section>
